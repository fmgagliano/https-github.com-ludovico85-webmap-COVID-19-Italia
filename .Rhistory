geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi)) +
geom_line()+
geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi), group = regioni) +
geom_line()+
geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi), group = regioni) +
geom_line(aes(color=regioni))+
geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi), group = regioni) +
geom_line(aes(color=regioni))+
geom_point()
data2
ggplot(data=data2, aes(x=data, y=totale_casi), group = data) +
geom_line(aes(color=regioni))+
geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi), group = data) +
geom_line()+
geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi), group = data) +
geom_point()
ggplot(data=data2, aes(x=data, y=totale_casi), group = data) +
geom_point()+
geom_line(aes(color = regioni))
data2
ggplot(data=data2, aes(x=data, y=totale_casi), group = data) +
geom_point()+
geom_line(aes(color = denominazione_regione))
ggplot(data=data2, aes(x=data, y=totale_casi), group = denominazione_regione) +
geom_point()+
geom_line(aes(color = denominazione_regione))
data2
ggplot(data=data2, aes(x=data, y=totale_casi), group = 1) +
geom_point()+
geom_line(aes(color = denominazione_regione))
str(data2)
ggplot(data=data2, aes(x=data, y=totale_casi), group = denominazione_regione) +
geom_point()+
geom_line(aes(color = denominazione_regione))
data2
library(dplyr)
separate(data, 1, into, sep = " ", remove = TRUE)
separate(data, 1, sep = " ", remove = TRUE)
library(tidyr)
data
separate(data = data, col = data, into = c("data", "ora"))
ggplot(data=data, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()
separate(data = data, col = data, into = c("data", "ora"), sep = "\\ ")
ggplot(data=data, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()
data<-read.csv(text = url, head = T)
andamento_nazionale<-read.csv(text = url, head = T)
andamento_nazionale<-separate(data = data, col = data, into = c("data", "ora"), sep = "\\ ")
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()
regioni<-read.csv(text = url2, head = T)
andamento_nazionale<-read.csv(text = url, head = T)
andamento_nazionale<-separate(data = data, col = data, into = c("data", "ora"), sep = "\\ ")
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()
url2<-getURL("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-regioni/dpc-covid19-ita-regioni.csv")
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = data, col = region, into = c("data", "ora"), sep = "\\ ")
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
ggplot(data=regiono, aes(x=data, y=totale_casi), group = denominazione_regione) +
geom_point()+
geom_line(aes(color = denominazione_regione))
ggplot(data=regioni, aes(x=data, y=totale_casi), group = denominazione_regione) +
geom_point()+
geom_line(aes(color = denominazione_regione))
ggplot(data=regioni, aes(x=data, y=totale_casi), group = concat(denominazione_regione, data)) +
geom_point()+
geom_line(aes(color = denominazione_regione))
concat(denominazione_regione, data)
group = concatenate(denominazione_regione, data)
ggplot(data=regioni, aes(x=data, y=totale_casi), group = denominazione_regione) +
geom_point()+
geom_line(aes(color = denominazione_regione))
ggplot(data=regioni, aes(x=data, y=totale_casi), group = denominazione_regione) +
geom_point()+
geom_line()
regioni<-regioni$gruppo = paste(regioni$data,regioni$denominazione_regione)
regioni$gruppo<-paste(regioni$data,regioni$denominazione_regione)
ggplot(data=regioni, aes(x=data, y=totale_casi), group = gruppo) +
geom_point()+
geom_line()
ggplot(data=regioni, aes(x=data, y=totale_casi), group = gruppo) +
geom_point()+
geom_line()
ggplot(data=regioni, aes(x=data, y=totale_casi), group =1) +
geom_point()+
geom_line()
ggplot(data=regioni, aes(x=data, y=totale_casi), group =1) +
geom_point()+
geom_line(aes(color = gruppo))
ggplot(data=regioni, aes(x=data, y=totale_casi), group =1) +
geom_point()+
geom_line(aes(color = denominazione_regione))
regioni
ggplot(data=regioni, aes(x=denominazione_regione, y=totale_casi), group =1) +
geom_point()+
geom_line(aes(color = denominazione_regione))
ggplot(data=regioni, aes(x=denominazione_regione, y=totale_casi), group =1) +
geom_point()+
geom_line()
ggplot(data=regioni, aes(x=denominazione_regione, y=totale_casi)) +
geom_point()+
geom_line()
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
ggplot(data=regioni, aes(x=data, y=totale_casi)) +
geom_point()+
geom_line()
ggplot(data=regioni, aes(x=data, y=totale_casi)) +
geom_point()+
geom_line(aes(color = denominazione_regione))
str(regioni)
ggplot(data=regioni, aes(x=data, y=totale_casi)) +
geom_point(aes(color = denominazione_regione))+
geom_line()
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point(aes(color = denominazione_regione))+
geom_line()
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()
ggplot(data=regioni, aes(x=as.numeric(data), y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()
regioni$data
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()
regioni$data<-as.Date(data, format = "%y/%m/%d")
regioni$data<-as.Date(regioni$data, format = "%y/%m/%d")
str(regioni)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
regioni$data
regioni$data<-as.Date(regioni$data, format = "%y/%m/%d")
regioni$data
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
regioni$data<-as.Date(regioni$data, format = "%y-%m-%d")
str(regioni)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
regioni$data
regioni$data<-as.Date(regioni$data, format = "%y-%m-%d")
regioni$data
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
regioni$data<-as.Date(regioni$data)
regioni$data
str(regioni)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()
str(regioni)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()+theme_bw
str(regioni)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()+theme_bw()
library(plotly)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()+theme_bw()
install.packages("ggplotly")
library(ggplotly)
install.packages("installr")
library(installr)
updateR()
library(MASS)
library(vcdExtra)
library(RCurl)
install.packages("RCurl")
install.packages("ggplot2")
install.packages("tidyr")
install.packages("plotly")
install.packages("ggplotly")
library(ggplotly)
library(plotly)
library(ggplot2)
library(RCurl)
library(ggplot2)
library(tidyr)
library(plotly)
url<-getURL("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-andamento-nazionale/dpc-covid19-ita-andamento-nazionale.csv")
andamento_nazionale<-read.csv(text = url, head = T)
andamento_nazionale<-separate(data = data, col = data, into = c("data", "ora"), sep = "\\ ")
andamento_nazionale<-read.csv(text = url, head = T)
andamento_nazionale
andamento_nazionale<-separate(data = andamento_nazionale, col = data, into = c("data", "ora"), sep = "\\ ")
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()
ggplotly(p)
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")
p
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme_bw(axis.text.x = element_text(angle = 90))
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 45))
p
andamento_nazionale<-read.csv(text = url, head = T)
andamento_nazionale<-separate(data = andamento_nazionale, col = data, into = c("data", "ora"), sep = "\\ ")
andamento_nazionale$data<-as.Date(andamento_nazionale$data)
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 90))
p
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 90))+scale_x_continuous(name="data", limits=c('feb24', 'mar12'))
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 90))+scale_x_date(date_breaks = "1 day",
labels=date_format("%b-%Y"),
limits = as.Date(c('2020-02-24','2020-03-12')))
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 90))+scale_x_date(date_breaks = "1 day",
limits = as.Date(c('2020-02-24','2020-03-12')))
p
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 90))+scale_x_date(date_breaks = "2 day",
limits = as.Date(c('2020-02-24','2020-03-12')))
p
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
limits = as.Date(c('2020-02-24','2020-03-12')))
p
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
labels=date_format("%d-%m"),
limits = as.Date(c('2020-02-24','2020-03-12')))
p<-ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
labels=format("%d-%m"),
limits = as.Date(c('2020-02-24','2020-03-12')))
p
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
labels=format("%d-%m-%y"),
limits = as.Date(c('2020-02-24','2020-03-12')))
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
format="%d/%m/%Y"),
limits = as.Date(c('2020-02-24','2020-03-12')))
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
format="%d/%m/%Y",
limits = as.Date(c('2020-02-24','2020-03-12')))
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
format=("%d/%m/%Y"),
limits = as.Date(c('2020-02-24','2020-03-12')))
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
format=("%d-%m-%Y"),
limits = as.Date(c('2020-02-24','2020-03-12')))
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-12')))
ggplot(data=andamento_nazionale, aes(x=data, y=totale_casi, group=1)) +
geom_line()+
geom_point()+
labs(x = "data", y = "casi totali")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-12')))+theme_classic()
ggplotly(p)
url2<-getURL("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-regioni/dpc-covid19-ita-regioni.csv")
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
regioni$data<-as.Date(regioni$data)
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()+
abs(x = "data", y = "casi totali per regione")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-12')))+theme_classic()
ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()+
labs(x = "data", y = "casi totali per regione")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-12')))+theme_classic()
ggplotly(p1)
p1<-ggplot(data=regioni, aes(x=data, y=totale_casi, color = denominazione_regione)) +
geom_point()+
geom_line()+
labs(x = "data", y = "casi totali per regione")+
theme(axis.text.x = element_text(angle = 0))+scale_x_date(date_breaks = "2 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-12')))+theme_classic()
ggplotly(p1)
setwd("I:\\Progetti\\GitHub\\webmap-COVID-19-Italia")
library(RCurl)
library(ggplot2)
library(tidyr)
library(plotly)
library(reshape2)
library(rjson)
source("custom_theme.R") ##funzione per customizzare l'output di ggplot2 ##
########################################################################################
### lettura dei dati andamento nazionale direttamente dal repo github e formattazione###
########################################################################################
url<-getURL("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-andamento-nazionale/dpc-covid19-ita-andamento-nazionale.csv")
andamento_nazionale<-read.csv(text = url, head = T)
andamento_nazionale<-separate(data = andamento_nazionale, col = data, into = c("data", "ora"), sep = "\\ ")
andamento_nazionale$data<-as.Date(andamento_nazionale$data)
#####################################################################
### chart 1 grafico sui casi totali e i casi attualemtne positivi####
################# N.B. aggiornare la data############################
#####################################################################
### lettura e formattazione dei dati ###
data_chart1<-andamento_nazionale[, c("data", "totale_casi", "totale_attualmente_positivi")]
colnames(data_chart1)<-c("data", "totali", "attualmente positivi")
data_chart1<-melt(data_chart1, id.vars = "data", measure.vars = c("totali", "attualmente positivi"))
### creazione del grafico utilizzando ggplot2 ###
chart1<-ggplot(data=data_chart1, aes(x=data, y=value, color=variable)) +
ggtitle("Casi totali e attualmente positivi")+
geom_line()+
geom_point(shape = 21, size = 3, stroke = 0.5)+
labs(x = "data", y = "numero di casi")+scale_x_date(date_breaks = "4 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-17')))+
scale_color_manual(labels = c("totale", "attualmente positivi"), values=c("#F81608", "#FD6407"))+
theme_map()
### opzioni per la conversione del grafico di ggplot2 in plotly##
l <- list(
font = list(
family = "sans-serif",
size = 12,
color = "white"),
bgcolor = NA,
bordercolor = NA,
borderwidth = 0,
orientation = "h",
x = 0.25,
y = -0.25)
### salvataggio del grafico in html utilizzando la libreria plotly###
chart1<-ggplotly(chart1) %>%
layout(legend = l)
htmlwidgets::saveWidget(chart1, "chart1.html",  background = "rgba(0,0,0,0.0)")
###########################################################
#### chart 2 grafico sul numero di guariti e di decessi ###
################# N.B. aggiornare la data##################
###########################################################
data_chart2<-andamento_nazionale[, c("data", "dimessi_guariti", "deceduti")]
colnames(data_chart2)<-c("data", "guariti", "deceduti")
data_chart2<-melt(data_chart2, id.vars = "data", measure.vars = c("guariti", "deceduti"))
chart2<-ggplot(data=data_chart2, aes(x=data, y=value, color=variable)) +
ggtitle("Guariti VS deceduti")+
geom_line()+
geom_point(shape = 21, size = 3, stroke = 0.5)+
labs(x = "data", y = "numero di casi")+scale_x_date(date_breaks = "4 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-17')))+
scale_color_manual(labels = c("guariti", "deceduti"), values=c("#94D402", "#5F46E4"))+
theme_map()
chart2<-ggplotly(chart2) %>%
layout(legend = l)
htmlwidgets::saveWidget(chart2, "chart2.html",  background = "rgba(0,0,0,0.0)")
###########################################################
#### chart 3 grafico sul numero di attualemnte positivi ###
################# N.B. aggiornare la data##################
###########################################################
data_chart3<-andamento_nazionale[, c("data", "nuovi_attualmente_positivi")]
colnames(data_chart3)<-c("data", "nuovi_casi")
chart3<-ggplot(data=data_chart3, aes(x=data, y=nuovi_casi, group=1)) +
ggtitle("Nuovi casi")+
geom_line(aes(color="nuovi casi"))+
geom_point(shape = 21, size = 3, stroke = 0.5, aes(color="nuovi casi"))+
labs(x = "data", y = "numero di nuovi casi")+scale_x_date(date_breaks = "4 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-17')))+
scale_color_manual(name = NA, breaks = "nuovi casi", values = "#DEFA05")+theme_map()%+replace%
theme(plot.margin = margin(0, -1, 0, -2, "cm"))
chart3<-ggplotly(chart3) %>%
layout(legend = l)
htmlwidgets::saveWidget(chart3, "chart3.html",  background = "rgba(0,0,0,0.0)")
##############################################################################
### lettura dei dati regionali direttamente dal repo github e formattazione###
##############################################################################
url2<-getURL("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-regioni/dpc-covid19-ita-regioni.csv")
regioni<-read.csv(text = url2, head = T)
regioni<-separate(data = regioni, col = data, into = c("data", "ora"), sep = "\\ ")
regioni$data<-as.Date(regioni$data)
#############################################################
### chart 4 grafico sul numero di casi totali per regione ###
################# N.B. aggiornare la data####################
#############################################################
data_chart4<-regioni
### creazione palette con colori casuali per le regioni ###
library(randomcoloR)
n <- 21
palette<-distinctColorPalette(n)
chart4<-ggplot(data=data_chart4, aes(x=data, y=(totale_casi), color=denominazione_regione)) +
ggtitle("Casi totali per regione")+
geom_line()+
geom_point(shape = 21, size = 3, stroke = 0.5)+
labs(x = "data", y = "numero di casi")+scale_x_date(date_breaks = "4 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-17')))+
scale_color_manual(values=palette)+
theme_map()
l <- list(
font = list(
family = "sans-serif",
size = 12,
color = "white"),
bgcolor = NA,
bordercolor = NA,
borderwidth = 0,
orientation = "h",
x = 0,
y = -0.2)
chart4<-ggplotly(chart4) %>%
layout(legend = l)
htmlwidgets::saveWidget(chart4, "chart4.html",  background = "rgba(0,0,0,0.0)")
data_chart5<-andamento_nazionale[, c("data", "totale_casi", "tamponi")]
data_chart5
colnames(data_chart5)<-c("data", "casi totali", "tamponi")
data_chart5<-melt(data_chart5, id.vars = "data", measure.vars = c("casi totali", "tamponi"))
data_chart5
gplot(data=data_chart5, aes(x=data, y=value,fill=variable)) +
ggtitle("Tamponi giornalieri")+
geom_bar(stat="identity", position=position_dodge())+
labs(x = "data", y = " ")+scale_x_date(date_breaks = "4 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-17')))+
#scale_color_manual(labels = c("casi totali", "tamponi effettuati"))+
theme_map()
ggplot(data=data_chart5, aes(x=data, y=value,fill=variable)) +
ggtitle("Tamponi giornalieri")+
geom_bar(stat="identity", position=position_dodge())+
labs(x = "data", y = " ")+scale_x_date(date_breaks = "4 day",
date_labels = "%b %d",
limits = as.Date(c('2020-02-24','2020-03-17')))+
#scale_color_manual(labels = c("casi totali", "tamponi effettuati"))+
theme_map()
